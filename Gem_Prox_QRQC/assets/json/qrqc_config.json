{
    "prompts": {
      "initial": "Je suis un conducteur de ligne/chef d'équipe et je souhaite analyser un problème en entreprise selon la méthode QRQC. Mon problème initial est : \"{{probleme_initial}}\".\nJe vais vous fournir des informations au fur et à mesure.\nPour commencer, posez-moi une question sur le Quoi du QQOQPC pour m'aider à DÉCRIRE LE PROBLÈME. Si vous pensez qu'une information peut être déduite de la phrase initiale, proposez-la et demandez si c'est correct. Par exemple, si l'énoncé est 'rupture de stock', proposez un 'Quoi ?' qui est 'Absence de composants de référence XYZ'. Posez une seule question à la fois.\nQuand vous estimez avoir suffisamment d'informations pour générer un rapport complet (après avoir couvert QQOQPC, QCDSM, 5M/5 Pourquoi), indiquez-le clairement par la phrase exacte \"J'ai suffisamment d'informations pour générer le rapport. Souhaitez-vous que je le fasse ?\" et n'ajoutez pas d'autres questions.",
      "followUp": "Voici ma réponse : \"{{reponse_utilisateur}}\".\nSi vous avez suffisamment d'informations pour générer un rapport complet (après avoir couvert QQOQPC, QCDSM, 5M/5 Pourquoi), indiquez-le clairement par la phrase exacte \"J'ai suffisamment d'informations pour générer le rapport. Souhaitez-vous que je le fasse ?\" et n'ajoutez pas d'autres questions.\nSinon, proposez une hypothèse de réponse pour un des éléments restant de QQOQPC, puis des IMPACTS (QCDSM) en commençant par l'impact client, puis les CAUSES RACINES (5M/5 Pourquoi), en vous basant sur la méthodologie QRQC. Posez une seule question à la fois.",
      "refinement": "J'ai reçu le contenu d'un précédent rapport QRQC et une demande d'affinement. Voici le rapport : \"{{rapport_precedent}}\" et la demande : \"{{demande_affinement}}\". Posez-moi des questions pour affiner l'analyse de ce problème, en vous basant sur la méthodologie QRQC (QQOQPC, QCDSM, 5M/5 Pourquoi). Soyez créatif pour imaginer des causes potentielles, et demandez-moi si elles sont envisageables ou si elles correspondent à ce que j'ai vu. Posez une seule question à la fois. Quand vous estimez avoir suffisamment d'informations pour générer un rapport complet, indiquez-le clairement par la phrase exacte \"J'ai suffisamment d'informations pour générer le rapport. Souhaitez-vous que je le fasse ?\" et n'ajoutez pas d'autres questions.",
      "reportGeneration": "Basé sur notre conversation complète ci-dessus, et en utilisant les informations validées par l'utilisateur, générez le rapport d'analyse de problème QRQC en format JSON, en suivant strictement la structure JSON que vous avez reçue dans votre configuration de génération. Le titre du problème doit être une phrase synthétique et factuelle. Pour l'étape 1, la réaction immédiate doit toujours inclure la protection du client si nécessaire. Pour l'étape 2, incluez des hypothèses de causes (avec créativité) et une analyse 5 Pourquoi pour la cause racine la plus probable. Pour l'étape 3, proposez un plan d'actions concret avec Qui, Quoi, Quand. Si le diagnostic est incomplet, le plan d'actions peut inclure des actions pour valider une hypothèse ou prendre des mesures.",
      "resume": "Voici un historique de conversation QRQC que je souhaite reprendre : \"{{conversation_a_reprendre}}\". Pouvez-vous analyser cet historique, identifier où l'analyse s'est arrêtée (QQOQPC, QCDSM, 5M/5 Pourquoi) et me poser la question suivante pour continuer l'analyse ? Posez une seule question à la fois.\nSi vous estimez que l'analyse est complète et que le rapport peut être généré, indiquez-le clairement par la phrase exacte \"J'ai suffisamment d'informations pour générer le rapport. Souhaitez-vous que je le fasse ?\" et n'ajoutez pas d'autres questions."
    },
    "schema": {
      "type": "OBJECT",
      "properties": {
        "titre_probleme": { "type": "STRING" },
        "etape1_detection_reaction": {
          "type": "OBJECT",
          "properties": {
            "probleme_initial": { "type": "STRING" },
            "definition_probleme_qqoqpc": {
              "type": "OBJECT",
              "properties": {
                "qui": { "type": "STRING" },
                "quoi": { "type": "STRING" },
                "ou": { "type": "STRING" },
                "quand": { "type": "STRING" },
                "comment": { "type": "STRING" },
                "combien": { "type": "STRING" },
                "pourquoi_probleme": { "type": "STRING" }
              },
              "required": [
                "qui",
                "quoi",
                "ou",
                "quand",
                "comment",
                "combien",
                "pourquoi_probleme"
              ]
            },
            "impacts_qcdsm": {
              "type": "OBJECT",
              "properties": {
                "qualite": { "type": "STRING" },
                "cout": { "type": "STRING" },
                "delai": { "type": "STRING" },
                "securite": { "type": "STRING" },
                "moral_management": { "type": "STRING" }
              },
              "required": [
                "qualite",
                "cout",
                "delai",
                "securite",
                "moral_management"
              ]
            },
            "reaction_immediate": {
              "type": "ARRAY",
              "items": { "type": "STRING" }
            }
          },
          "required": [
            "probleme_initial",
            "definition_probleme_qqoqpc",
            "impacts_qcdsm",
            "reaction_immediate"
          ]
        },
        "etape2_analyse_causes": {
          "type": "OBJECT",
          "properties": {
            "hypotheses_causes": {
              "type": "ARRAY",
              "items": { "type": "STRING" }
            },
            "cinq_pourquoi_analyse": {
              "type": "ARRAY",
              "items": {
                "type": "OBJECT",
                "properties": {
                  "question": { "type": "STRING" },
                  "reponse": { "type": "STRING" }
                },
                "required": [
                  "question",
                  "reponse"
                ]
              }
            },
            "cause_racine_hypothese": { "type": "STRING" }
          },
          "required": [
            "hypotheses_causes",
            "cinq_pourquoi_analyse",
            "cause_racine_hypothese"
          ]
        },
        "etape3_resolution_probleme": {
          "type": "OBJECT",
          "properties": {
            "plan_actions": {
              "type": "ARRAY",
              "items": {
                "type": "OBJECT",
                "properties": {
                  "action": { "type": "STRING" },
                  "qui": { "type": "STRING" },
                  "quand": { "type": "STRING" }
                },
                "required": [
                  "action",
                  "qui",
                  "quand"
                ]
              }
            },
            "verification_objectif": { "type": "STRING" },
            "finalisation_partage_objectif": { "type": "STRING" }
          },
          "required": [
            "plan_actions",
            "verification_objectif",
            "finalisation_partage_objectif"
          ]
        }
      },
      "required": [
        "titre_probleme",
        "etape1_detection_reaction",
        "etape2_analyse_causes",
        "etape3_resolution_probleme"
      ]
    }
  }
